---
---

<div class="terminal-container w-full h-[300px] border border-primary/10 bg-black/40 backdrop-blur-md rounded-lg overflow-hidden flex flex-col font-mono text-xs md:text-sm group hover:border-secondary/30 transition-colors duration-500">
  <!-- Terminal Header -->
  <div class="bg-primary/5 px-4 py-2 flex items-center justify-between border-b border-primary/10">
    <div class="flex gap-1.5">
      <div class="w-2.5 h-2.5 rounded-full bg-red-500/50"></div>
      <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/50"></div>
      <div class="w-2.5 h-2.5 rounded-full bg-green-500/50"></div>
    </div>
    <span class="text-[10px] text-muted uppercase tracking-widest opacity-50">bash â€” 80x24</span>
  </div>

  <!-- Terminal Output -->
  <div id="terminal-output" class="flex-1 p-4 overflow-y-auto space-y-2 scrollbar-hide text-muted">
    <div class="text-secondary"># Welcome to AJVAD's Secure Terminal v1.0.0</div>
    <div class="text-muted">Type <span class="text-primary font-bold">'help'</span> to see available commands.</div>
  </div>

  <!-- Terminal Input -->
  <div class="p-4 pt-0 flex items-center gap-2">
    <span class="text-secondary font-bold">visitor@ajvadn:~$</span>
    <input 
      type="text" 
      id="terminal-input" 
      class="flex-1 bg-transparent border-none outline-none text-primary caret-secondary" 
      autocomplete="off"
      spellcheck="false"
    />
  </div>
</div>

<script>
  const output = document.getElementById('terminal-output');
  const input = document.getElementById('terminal-input') as HTMLInputElement;
  const container = document.querySelector('.terminal-container');

  const commands: Record<string, string> = {
    'help': 'Available commands: whoami, ls, cat [file], clear, date, secret',
    'whoami': 'AJVAD N | Cybersecurity Analyst & Ethical Hacker. Passionate about finding vulnerabilities and securing systems.',
    'ls': 'achievements.txt  skills.txt  tools.md  contact.txt',
    'date': new Date().toLocaleString(),
    'cat achievements.txt': 'Recognized by NASA, Intel, U.S. Dept of Commerce. Multiple high-impact bug bounties.',
    'cat skills.txt': 'Penetration Testing, Network Security, Python, Bash, Web Security, IoT Research.',
    'cat tools.md': 'Built: Subdomain Hunter, Parm-fuzzer. Pro: Burp Suite, Nuclei, FFUF, Metasploit.',
    'cat contact.txt': 'Email: ajvadaju2003@gmail.com | LinkedIn: ajvad-n',
    'secret': 'Initializing brute force... [ACCESS DENIED] Try harder! ;)',
  };

  const history: string[] = [];
  let historyIndex = -1;

  function addLine(text: string, type: 'input' | 'output' | 'error' = 'output') {
    const line = document.createElement('div');
    if (type === 'input') {
      line.innerHTML = `<span class="text-secondary font-bold">visitor@ajvadn:~$</span> ${text}`;
    } else if (type === 'error') {
      line.className = 'text-red-400';
      line.textContent = `sh: command not found: ${text}`;
    } else {
      line.className = 'text-primary/80 leading-relaxed';
      line.textContent = text;
    }
    output?.appendChild(line);
    output?.scrollTo(0, output.scrollHeight);
  }

  input?.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      const val = input.value.trim().toLowerCase();
      if (!val) return;

      addLine(input.value, 'input');
      
      if (val === 'clear') {
        if (output) output.innerHTML = '';
      } else if (commands[val]) {
        addLine(commands[val]);
      } else if (val.startsWith('cat ')) {
        const file = val;
        if (commands[file]) {
           addLine(commands[file]);
        } else {
           addLine(`cat: ${val.split(' ')[1]}: No such file or directory`, 'output');
        }
      } else {
        addLine(val, 'error');
      }

      history.push(input.value);
      historyIndex = history.length;
      input.value = '';
    }

    if (e.key === 'ArrowUp') {
      if (historyIndex > 0) {
        historyIndex--;
        input.value = history[historyIndex];
      }
      e.preventDefault();
    }

    if (e.key === 'ArrowDown') {
      if (historyIndex < history.length - 1) {
        historyIndex++;
        input.value = history[historyIndex];
      } else {
        historyIndex = history.length;
        input.value = '';
      }
      e.preventDefault();
    }

    if (e.key === 'Tab') {
      e.preventDefault();
      const rawVal = input.value.toLowerCase();
      const val = rawVal.trim();
      if (!val) return;

      const files = ['achievements.txt', 'skills.txt', 'tools.md', 'contact.txt'];
      const allCommands = Object.keys(commands).filter(c => !c.startsWith('cat '));

      let suggestions: string[] = [];
      let prefix = '';

      if (rawVal.includes(' ')) {
        const parts = rawVal.split(/\s+/);
        if (parts[0] === 'cat') {
          prefix = 'cat ';
          const search = parts[1] || '';
          suggestions = files.filter(f => f.startsWith(search));
        }
      } else {
        suggestions = allCommands.filter(c => c.startsWith(val));
      }

      if (suggestions.length === 1) {
        input.value = prefix + suggestions[0];
      }
    }
  });

  // Focus input when clicking anywhere on the terminal
  container?.addEventListener('click', () => {
    input?.focus();
  });
</script>

<style>
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* Input focus outline override */
  input:focus {
    box-shadow: none !important;
  }
</style>
